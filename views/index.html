<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <title>BEAM - a personal finance visualizer</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
        <link rel="stylesheet" type="text/css" href="/static/index.css">

        <script src="https://www.gstatic.com/firebasejs/ui/4.8.0/firebase-ui-auth.js"></script>
        <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/4.8.0/firebase-ui-auth.css" />
    </head>
    <body>
        <div class="container d-flex flex-column text-center h-100">
            <main class="mb-5">
                <h1 class="display-1 fw-bold my-4 ">BEAM</h1>
                <div class="main-row row gap-4">
                    <p class="col-md lead lh-lg my-auto mx-auto">
                        Gain insight to your personal finances with Beam, an application that obtains your data through <a class="text-decoration-none" href="https://plaid.com/how-it-works-for-consumers/" target="_blank">Plaid</a> and provides enlightening visualizations which help you to understand the flow of your money.
                    </p>
                    <div id="firebaseui-auth-container" class="col-md my-auto"></div>
                </div>
            </main>
            <footer class="footer mt-auto py-3 bg-light">
                <div>
                  <span class="text-muted">Made with love ❤️ by <a href="https://neilricci.github.io/" class="text-decoration-none" target="_blank">Neil</a>.</span>
                </div>
            </footer>
        </div>

        <script src="/static/jQuery.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>


        <script src="https://www.gstatic.com/firebasejs/8.4.2/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.4.2/firebase-analytics.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.4.2/firebase-auth.js"></script>

        <script>
            var firebaseConfig = {
                apiKey: "AIzaSyC1AE6LT8ZBPqYIWZJ4Pbs28TqW5oSnwWg",
                authDomain: "beam-fdfaa.firebaseapp.com",
                databaseURL: "https://beam-fdfaa-default-rtdb.firebaseio.com",
                projectId: "beam-fdfaa",
                appId: "1:511819629561:web:40ba9a255c0373cccc7328",
                measurementId: "G-E66W95H373"
            };

            firebase.initializeApp(firebaseConfig);
            firebase.analytics();

            var ui = new firebaseui.auth.AuthUI(firebase.auth());
            ui.start('#firebaseui-auth-container', {
                signInOptions: [
                    firebase.auth.EmailAuthProvider.PROVIDER_ID
                ],
                signInSuccessUrl: '/'
            });

            var user = firebase.auth().currentUser;

            firebase.auth().onAuthStateChanged(function(user) {
                if (user) {
                    console.log(user);
                    window.location.replace('/user/' + user.uid);
                }
            });
        </script>
    </body>
</html>
